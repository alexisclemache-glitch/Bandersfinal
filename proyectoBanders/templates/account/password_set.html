{% extends "base.html" %}
{% load i18n static %}
{% load crispy_forms_tags %}

{% block title %}{% trans "Restablecer Contraseña | Banders" %}{% endblock title %}

{% block content %}
<div class="auth-page-wrapper auth-bg-cover py-5 d-flex justify-content-center align-items-center min-vh-100">
    <div class="bg-overlay" style="background-color: #405189; opacity: 0.8; position: absolute; height: 100%; width: 100%; top:0; left:0; z-index: -1;"></div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6 col-xl-5">

                <div class="text-center mb-4">
                    <a href="/" class="d-inline-block auth-logo">
                        <img src="{% static 'images/logo-light.png' %}?v=3" alt="Banders Logo" height="80" class="auth-logo-img">
                    </a>
                </div>

                <div class="card mt-2 shadow-lg border-0">
                    <div class="card-body p-4 text-center">
                        <div class="avatar-lg mx-auto mt-2">
                            <div class="avatar-title bg-danger-subtle text-danger display-3 rounded-circle" style="width: 80px; height: 80px; line-height: 80px; margin: 0 auto; font-size: 40px; background-color: #fce4e4;">
                                <i class="ri-lock-password-line"></i>
                            </div>
                        </div>

                        <div class="mt-4 pt-2">
                            <h4 class="text-danger fw-bold text-uppercase">¿Olvidó su contraseña?</h4>
                            <p class="text-muted">No se preocupe, introduzca su correo y le enviaremos instrucciones para restablecerla.</p>

                            <form method="POST" action="{% url 'account_reset_password' %}" class="mt-4 text-start">
                                {% csrf_token %}

                                <div class="mb-3">
                                    {{ form|crispy }}
                                </div>

                                <div class="d-grid mt-4">
                                    <button class="btn btn-danger btn-lg shadow-none fw-bold py-2" type="submit">
                                        ENVIAR ENLACE
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="mt-4 text-center">
                    <p class="mb-0 text-white">¿Recordó su contraseña?
                        <a href="{% url 'account_login' %}" class="fw-bold text-white text-decoration-underline ms-1">Iniciar Sesión</a>
                    </p>
                </div>

            </div>
        </div>
    </div>
</div>

<style>
    /* Degradado institucional Banders */
    .auth-bg-cover {
        background: linear-gradient(-45deg, #0ab39c 0%, #405189 100%);
        position: relative;
        overflow: hidden;
        z-index: 1;
    }

    /* Mejora de nitidez del logo de 80px */
    .auth-logo-img {
        max-width: 100%;
        object-fit: contain;
        image-rendering: -webkit-optimize-contrast;
        filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.3));
    }

    .card {
        border-radius: 12px;
        z-index: 2;
    }

    .text-decoration-underline {
        text-underline-offset: 4px;
    }
</style>
{% endblock content %}